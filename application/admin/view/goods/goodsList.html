{include file="public/header" /}
<link rel="stylesheet" href="__STATIC__/laydate/theme/default/laydate.css">
<script type="text/javascript" src="__STATIC__/laydate/laydate.js"></script>
<body>
<!--面包屑导航 开始-->
<div class="crumb_warp">
    <!--<i class="fa fa-bell"></i> 欢迎使用登陆网站后台，建站的首选工具。-->
    <i class="fa fa-home"></i> <a href="#">首页</a> &raquo; <a href="#">商品管理</a> &raquo; 商品列表
</div>
<!--面包屑导航 结束-->

<!--结果页快捷搜索框 开始-->
<div class="search_wrap">
    <form action="{:url('goodsList')}" method="get">
        <input type="hidden" name="customer_id" value="{$customerInfo.id}">
        <table class="search_tab">
            <tr>
                <th width="60">客户:</th>
                <td>{$customerInfo.customer_name}</td>
                <th width="40">电话:</th>
                <td>{$customerInfo.tel}</td>
                <th width="80">商品:</th>
                <td><input type="text" name="goods_name" placeholder="商品名" value="{$search.goods_name}"></td>
                <th width="80">购买时间:</th>
                <td><input type="text" name="buy_time" id="buy_time" placeholder="时间范围" value="{$search.buy_time}"></td>
                <td><input type="hidden" name="start_date" id="start_date"></td>
                <td><input type="hidden" name="end_date" id="end_date"></td>
                <td>
                    <input type="submit" name="sub" value="查询">
                    <input type="button" class="back" onclick="history.go(-1)" value="返回">
                </td>
            </tr>
        </table>
    </form>
</div>
<!--结果页快捷搜索框 结束-->

<!--搜索结果页面 列表 开始-->
<form action="#" method="post">
    <div class="result_wrap">
        <!--快捷导航 开始-->
        <div class="result_content">
            <div class="short_wrap">
                <a href="{:url('addGoods')}?customer_id={$customerInfo.id}" title="新增商品"><i class="fa fa-fw fa-plus-circle"></i>新增</a>
            </div>
        </div>
        <!--快捷导航 结束-->
    </div>
    <div class="result_wrap">
        <div class="result_content">
            <table class="list_tab">
                <tr>
                    <th class="tc">ID</th>
                    <th>产品</th>
                    <th>价格(元)</th>
                    <th>购买时间</th>
                    <th>操作</th>
                </tr>
                {volist name="goodsList" id="gList" key="k"}
                    <tr>
                        <td class="tc">{$k}</td>
                        <td>{$gList.goods_name}</td>
                        <td>{$gList.goods_money}</td>
                        <td>{$gList.buy_time}</td>
                        <td>
                            <a href="{:url('editGoods')}?id={$gList.id}" title="修改"><i class="fa fa-fw fa-edit"></i>修改</a>
                        </td>
                    </tr>
                {/volist}
                <tr>
                    <td class="tc">合计</td>
                    <td></td>
                    <td>{$total}</td>
                    <td></td>
                    <td></td>
                </tr>
            </table>
            <div class="page_list">
                {$page}
            </div>
        </div>
    </div>
</form>
<!--搜索结果页面 列表 结束-->
</body>
</html>
<script type="text/javascript">
    laydate.render({
        elem: '#buy_time',
        range: true,
        done: function (value,date,endDate) {
            $("#start_date").val(dateSplice(date));
            $("#end_date").val(dateSplice(endDate));
        }
    });

    /**
     * 时间处理
     * @param obj
     * @returns {string}
     */
    function dateSplice(obj) {
        return(obj.year+'-'+obj.month+'-'+obj.date);
    }
</script>